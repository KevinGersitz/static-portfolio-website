<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/style.css" />
    <title>Home</title>
  </head>

  <body>
    <header>
      <div class="container">
        <button
          id="menuToggle"
          class="menu-button"
          aria-label="Toggle navigation"
        >
          ☰
        </button>

        <nav class="navbar">
          <a href="index.html">Home</a>
          <a href="about.html">About</a>
          <a href="projects.html">Projects</a>
          <a href="contact.html">Contact</a>
        </nav>
        <button id="themeToggle">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
          >
            <defs>
              <mask id="lineMdLightDark0">
                <circle cx="7.5" cy="7.5" r="5.5" fill="#fff" />
                <circle cx="7.5" cy="7.5" r="5.5">
                  <animate
                    fill="freeze"
                    attributeName="cx"
                    dur="0.4s"
                    values="7.5;11"
                  />
                  <animate
                    fill="freeze"
                    attributeName="r"
                    dur="0.4s"
                    values="5.5;6.5"
                  />
                </circle>
              </mask>
              <mask id="lineMdLightDark1">
                <g fill="#fff">
                  <circle cx="12" cy="9" r="5.5">
                    <animate
                      fill="freeze"
                      attributeName="cy"
                      begin="1s"
                      dur="0.5s"
                      values="9;15"
                    />
                  </circle>
                  <g fill-opacity="0">
                    <use
                      href="#lineMdLightDark2"
                      transform="rotate(-75 12 15)"
                    />
                    <use
                      href="#lineMdLightDark2"
                      transform="rotate(-25 12 15)"
                    />
                    <use
                      href="#lineMdLightDark2"
                      transform="rotate(25 12 15)"
                    />
                    <use
                      href="#lineMdLightDark2"
                      transform="rotate(75 12 15)"
                    />
                    <set
                      fill="freeze"
                      attributeName="fill-opacity"
                      begin="1.5s"
                      to="1"
                    />
                  </g>
                </g>
                <path d="M0 10h26v5h-26z" />
                <path
                  stroke="#fff"
                  stroke-dasharray="26"
                  stroke-dashoffset="26"
                  stroke-width="2"
                  d="M23 12h-22"
                >
                  <animate
                    fill="freeze"
                    attributeName="stroke-dashoffset"
                    begin="0.5s"
                    dur="0.4s"
                    values="26;0"
                  />
                </path>
              </mask>
              <symbol id="lineMdLightDark2">
                <path d="M11 18h2L12 20z" opacity="0">
                  <animate
                    fill="freeze"
                    attributeName="d"
                    begin="1.5s"
                    dur="0.4s"
                    values="M11 18h2L12 20z;M10.5 21.5h3L12 24z"
                  />
                  <set
                    fill="freeze"
                    attributeName="opacity"
                    begin="1.5s"
                    to="1"
                  />
                </path>
              </symbol>
            </defs>
            <g fill="currentColor">
              <rect
                width="13"
                height="13"
                x="1"
                y="1"
                mask="url(#lineMdLightDark0)"
              />
              <path
                d="M-2 11h28v13h-28z"
                mask="url(#lineMdLightDark1)"
                transform="rotate(-45 12 12)"
              />
            </g>
          </svg>
        </button>
      </div>
    </header>

    <main>
      <div class="container">
        <form
          id="contactForm"
          action="https://formspree.io/f/xjkroarw"
          method="POST"
        >
          <div class="row">
            <div class="field">
              <label for="first_name">Vorname:</label>
              <input type="text" id="first_name" name="Vorname" required />
            </div>

            <div class="field">
              <label for="last_name">Nachname:</label>
              <input type="text" id="last_name" name="Nachname" required />
            </div>
          </div>

          <div class="field">
            <label for="email">E-Mail:</label>
            <input type="email" id="email" name="Email" required />
          </div>

          <div class="field">
            <label for="message">Nachricht:</label>
            <textarea
              id="message"
              name="Nachricht"
              required
              minlength="10"
              rows="5"
            ></textarea>
          </div>

          <input type="text" name="_gotcha" style="display: none" />

          <button type="submit" id="submitBtn">Absenden</button>

          <div id="formStatus" style="margin-top: 10px"></div>
        </form>
      </div>
    </main>

    <footer>
      <div class="container">
        <p>© 2025 Kevin Gersitz</p>
      </div>
    </footer>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const body = document.body;

        const toggleButton = document.getElementById("themeToggle");
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme === "dark") {
          body.classList.add("dark-mode");
        }

        if (toggleButton) {
          toggleButton.addEventListener("click", () => {
            body.classList.toggle("dark-mode");

            localStorage.setItem(
              "theme",
              body.classList.contains("dark-mode") ? "dark" : "light"
            );
          });
        }

        const menuButton = document.getElementById("menuToggle");
        const nav = document.querySelector(".navbar");

        if (menuButton && nav) {
          menuButton.addEventListener("click", () => {
            nav.classList.toggle("open");
          });
        }

        const form = document.getElementById("contactForm");
        if (form) {
          form.addEventListener("submit", async function (e) {
            e.preventDefault();

            const formData = new FormData(form);
            const status = document.getElementById("formStatus");

            status.style.color = "black";
            status.innerHTML = "Nachricht wird gesendet...";

            try {
              const response = await fetch(form.action, {
                method: "POST",
                body: formData,
                headers: { Accept: "application/json" },
              });

              if (response.ok) {
                status.style.color = "green";
                status.innerHTML =
                  "Vielen Dank! Ihre Nachricht wurde erfolgreich versendet.";
                form.reset();
              } else {
                let errorText = "Ein Fehler ist aufgetreten.";
                try {
                  const data = await response.json();
                  if (data.errors) {
                    errorText = data.errors
                      .map((err) => err.emssage)
                      .join("<br>");
                  }
                } catch (_) {}
                status.style.color = "red";
                status.innerHTML = errorText;
              }
            } catch (error) {
              status.style.color = "red";
              status.innerHTML =
                "Verbindungsfehler - bitte versuchen Sie es später erneut.";
            } finally {
            }
          });
        }
      });
    </script>
  </body>
</html>
